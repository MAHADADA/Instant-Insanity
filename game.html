<html>

<head>
	<script src="./game.js" type="module"></script>
	<style>
		.facetop {
			width: 20px;
			height: 8px;
			margin: 0 auto;
		}

		.faceside {
			width: 20px;
			height: 20px;
		}

		.face1 {
			background-color: red;
		}

		.face2 {
			background-color: yellow;
		}

		.face3 {
			background-color: green;
		}

		.face4 {
			background-color: blue;
		}

	</style>
</head>

<body>
	<table>
		<tr>
			<td colspan="4" style="text-align: center;">
				<div id="brick02" class="facetop"></div>
			</td>
		</tr>
		<tr>
			<td>
				<div id="brick00" class="faceside"></div>
			</td>
			<td>
				<div id="brick01" class="faceside"></div>
			</td>
			<td>
				<div id="brick03" class="faceside"></div>
			</td>
			<td>
				<div id="brick04" class="faceside"></div>
			</td>
			<td>
				<button onclick="rotateX(0, 1)">X1</button>
				<button onclick="rotateX(0, 2)">X2</button>
				<button onclick="rotateX(0, 3)">X3</button>
				<button onclick="rotateY(0, 1)">Y1</button>
				<button onclick="rotateY(0, 2)">Y2</button>
				<button onclick="rotateY(0, 3)">Y3</button>
				<button onclick="rotateZ(0, 1)">Z1</button>
				<button onclick="rotateZ(0, 2)">Z2</button>
				<button onclick="rotateZ(0, 3)">Z3</button>
			</td>
		</tr>
		<tr>
			<td colspan="4" style="text-align: center;">
				<div id="brick05" class="facetop"></div>
			</td>
		</tr>
		<!-- 1 / 2 -->
		<tr>
			<td colspan="4" style="text-align: center;">
				<div id="brick12" class="facetop"></div>
			</td>
		</tr>
		<tr>
			<td>
				<div id="brick10" class="faceside"></div>
			</td>
			<td>
				<div id="brick11" class="faceside"></div>
			</td>
			<td>
				<div id="brick13" class="faceside"></div>
			</td>
			<td>
				<div id="brick14" class="faceside"></div>
			</td>
			<td>
				<button onclick="rotateX(1, 1)">X1</button>
				<button onclick="rotateX(1, 2)">X2</button>
				<button onclick="rotateX(1, 3)">X3</button>
				<button onclick="rotateY(1, 1)">Y1</button>
				<button onclick="rotateY(1, 2)">Y2</button>
				<button onclick="rotateY(1, 3)">Y3</button>
				<button onclick="rotateZ(1, 1)">Z1</button>
				<button onclick="rotateZ(1, 2)">Z2</button>
				<button onclick="rotateZ(1, 3)">Z3</button>
			</td>
		</tr>
		<tr>
			<td colspan="4" style="text-align: center;">
				<div id="brick15" class="facetop"></div>
			</td>
		</tr>
		<!-- 2 / 3 -->
		<tr>
			<td colspan="4" style="text-align: center;">
				<div id="brick22" class="facetop"></div>
			</td>
		</tr>
		<tr>
			<td>
				<div id="brick20" class="faceside"></div>
			</td>
			<td>
				<div id="brick21" class="faceside"></div>
			</td>
			<td>
				<div id="brick23" class="faceside"></div>
			</td>
			<td>
				<div id="brick24" class="faceside"></div>
			</td>
			<td>
				<button onclick="rotateX(2, 1)">X1</button>
				<button onclick="rotateX(2, 2)">X2</button>
				<button onclick="rotateX(2, 3)">X3</button>
				<button onclick="rotateY(2, 1)">Y1</button>
				<button onclick="rotateY(2, 2)">Y2</button>
				<button onclick="rotateY(2, 3)">Y3</button>
				<button onclick="rotateZ(2, 1)">Z1</button>
				<button onclick="rotateZ(2, 2)">Z2</button>
				<button onclick="rotateZ(2, 3)">Z3</button>
			</td>
		</tr>
		<tr>
			<td colspan="4" style="text-align: center;">
				<div id="brick25" class="facetop"></div>
			</td>
		</tr>
		<!-- 3 / 4 -->
		<tr>
			<td colspan="4" style="text-align: center;">
				<div id="brick32" class="facetop"></div>
			</td>
		</tr>
		<tr>
			<td>
				<div id="brick30" class="faceside"></div>
			</td>
			<td>
				<div id="brick31" class="faceside"></div>
			</td>
			<td>
				<div id="brick33" class="faceside"></div>
			</td>
			<td>
				<div id="brick34" class="faceside"></div>
			</td>
			<td>
				<button onclick="rotateX(3, 1)">X1</button>
				<button onclick="rotateX(3, 2)">X2</button>
				<button onclick="rotateX(3, 3)">X3</button>
				<button onclick="rotateY(3, 1)">Y1</button>
				<button onclick="rotateY(3, 2)">Y2</button>
				<button onclick="rotateY(3, 3)">Y3</button>
				<button onclick="rotateZ(3, 1)">Z1</button>
				<button onclick="rotateZ(3, 2)">Z2</button>
				<button onclick="rotateZ(3, 3)">Z3</button>
			</td>
		</tr>
		<tr>
			<td colspan="4" style="text-align: center;">
				<div id="brick35" class="facetop"></div>
			</td>
		</tr>
	</table>

	<button onclick="isResolve()">Check answer</button>
	Step: <span id="stepCounter"></span>
	Time: <span id="timeCounter"></span>

	<script>
		const brickCount = 4;
		window.onload = function() {
			window.game = new Game(brickCount);
			draw();
			window.timeInt = setInterval(() => {
				document.getElementById("timeCounter").innerText = game.getTimeFormatted();
			}, 10);
		}

		function rotateX(bid, angle) {
			game.rotateX(bid, angle);
			draw();
		}

		function rotateY(bid, angle) {
			game.rotateY(bid, angle);
			draw();
		}

		function rotateZ(bid, angle) {
			game.rotateZ(bid, angle);
			draw();
		}

		function isResolve() {
			if (game.isResolve()) {
				alert('mission clear');
				game.pause();
				clearInterval(timeInt);
			} else {
				alert('not yet');
			}
		}

		function draw() {
			for (let bid = 0; bid < brickCount; bid++) {
				for (let face = 0; face < 6; face++) {
					const el = document.getElementById("brick" + bid + face);
					el.classList.remove("face1");
					el.classList.remove("face2");
					el.classList.remove("face3");
					el.classList.remove("face4");
					el.classList.add("face" + game.bricks[bid][face]);
				}
			}
			document.getElementById("stepCounter").innerText = game.getStepFormatted();
		}
	</script>
</body>

</html>
